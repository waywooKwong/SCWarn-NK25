# Robot Shop 故障注入实验报告

## 实验概述

- **开始时间**: 2025-05-30 14:37:31 UTC
- **持续时间**: 30分钟
- **监控服务数**: 13个
- **采样间隔**: 5秒

## 故障注入方法

使用Chaos Mesh进行Pod Kill实验，采用以下策略：

1. **第一阶段 (0-3分钟)**: 杀死payment服务pod
2. **第二阶段 (3-8分钟)**: 并行杀死cart和catalogue服务pods
3. **第三阶段 (8-12分钟)**: 随机杀死50%的shipping或dispatch服务pods
4. **第四阶段 (12-18分钟)**: 并行杀死web和user服务pods
5. **第五阶段 (18-20分钟)**: 杀死ratings服务pod

## 指标影响分析

### cart 服务

#### 存活率 (envoy_server_live)
- **最低值**: 100.00%
- **最高值**: 100.00%
- **平均值**: 100.00%
- **标准差**: 0.00%

#### 其他关键指标
- **请求总数**: 平均=8.18, 最小=1.00, 最大=23.00
- **连接持续时间**: 平均=13177060.93, 最小=0.00, 最大=40400000.00
- **CPU使用率**: 平均=4.47, 最小=0.84, 最大=11.73
- **内存使用量**: 平均=34040505.35, 最小=28708864.00, 最大=39313408.00
- **网络接收字节数**: 平均=389562209.97, 最小=702645.00, 最大=1194834642.00
- **网络发送字节数**: 平均=592824468.32, 最小=747263.00, 最大=1817840165.00

### catalogue 服务

#### 存活率 (envoy_server_live)
- **最低值**: 100.00%
- **最高值**: 100.00%
- **平均值**: 100.00%
- **标准差**: 0.00%

#### 其他关键指标
- **请求总数**: 平均=8.25, 最小=1.00, 最大=23.00
- **连接持续时间**: 平均=13222939.07, 最小=0.00, 最大=40100000.00
- **CPU使用率**: 平均=4.18, 最小=0.21, 最大=11.98
- **内存使用量**: 平均=32314401.03, 最小=28184576.00, 最大=36782080.00
- **网络接收字节数**: 平均=526220100.44, 最小=639300.00, 最大=1598645399.00
- **网络发送字节数**: 平均=795965125.86, 最小=645286.00, 最大=2417839184.00

### chaos-daemon 服务

#### 其他关键指标

### dispatch 服务

#### 存活率 (envoy_server_live)
- **最低值**: 100.00%
- **最高值**: 100.00%
- **平均值**: 100.00%
- **标准差**: 0.00%

#### 其他关键指标
- **请求总数**: 平均=23.62, 最小=23.00, 最大=24.00
- **连接持续时间**: 平均=41117204.30, 最小=40100000.00, 最大=41750000.00
- **CPU使用率**: 平均=11.17, 最小=10.91, 最大=11.42
- **内存使用量**: 平均=32067980.39, 最小=28241920.00, 最大=36253696.00
- **网络接收字节数**: 平均=240410400.71, 最小=235269544.00, 最大=245461613.00
- **网络发送字节数**: 平均=386472693.80, 最小=377863712.00, 最大=394981737.00

### mongodb 服务

#### 存活率 (envoy_server_live)
- **最低值**: 100.00%
- **最高值**: 100.00%
- **平均值**: 100.00%
- **标准差**: 0.00%

#### 其他关键指标
- **请求总数**: 平均=23.93, 最小=23.00, 最大=24.00
- **连接持续时间**: 平均=40710215.05, 最小=38900000.00, 最大=40850000.00
- **CPU使用率**: 平均=12.13, 最小=11.78, 最大=12.45
- **内存使用量**: 平均=35181850.61, 最小=32755712.00, 最大=39260160.00
- **网络接收字节数**: 平均=244749534.28, 最小=239359570.00, 最大=250019477.00
- **网络发送字节数**: 平均=392312406.05, 最小=383345634.00, 最大=401163008.00

### mysql 服务

#### 存活率 (envoy_server_live)
- **最低值**: 100.00%
- **最高值**: 100.00%
- **平均值**: 100.00%
- **标准差**: 0.00%

#### 其他关键指标
- **请求总数**: 平均=23.87, 最小=23.00, 最大=24.00
- **连接持续时间**: 平均=41017921.15, 最小=39500000.00, 最大=41250000.00
- **CPU使用率**: 平均=11.02, 最小=10.73, 最大=11.31
- **内存使用量**: 平均=32760747.58, 最小=30982144.00, 最大=37732352.00
- **网络接收字节数**: 平均=287569731.80, 最小=281310547.00, 最大=293549639.00
- **网络发送字节数**: 平均=449855259.40, 最小=439742475.00, 最大=459617608.00

### payment 服务

#### 存活率 (envoy_server_live)
- **最低值**: 100.00%
- **最高值**: 100.00%
- **平均值**: 100.00%
- **标准差**: 0.00%

#### 其他关键指标
- **请求总数**: 平均=6.22, 最小=1.00, 最大=24.00
- **连接持续时间**: 平均=9234139.78, 最小=0.00, 最大=40650000.00
- **CPU使用率**: 平均=2.99, 最小=0.34, 最大=11.27
- **内存使用量**: 平均=32575421.94, 最小=27262976.00, 最大=40697856.00
- **网络接收字节数**: 平均=48486664.54, 最小=620081.00, 最大=200812539.00
- **网络发送字节数**: 平均=79104185.09, 最小=630245.00, 最大=327659269.00

### rabbitmq 服务

#### 存活率 (envoy_server_live)
- **最低值**: 100.00%
- **最高值**: 100.00%
- **平均值**: 100.00%
- **标准差**: 0.00%

#### 其他关键指标
- **请求总数**: 平均=26.61, 最小=26.00, 最大=27.00
- **连接持续时间**: 平均=40897718.39, 最小=39702557.10, 最大=41652557.10
- **CPU使用率**: 平均=12.56, 最小=12.28, 最大=12.85
- **内存使用量**: 平均=34079307.24, 最小=30695424.00, 最大=38297600.00
- **网络接收字节数**: 平均=222562898.90, 最小=217781516.00, 最大=227270280.00
- **网络发送字节数**: 平均=360260622.47, 最小=352157777.00, 最大=368279547.00

### ratings 服务

#### 存活率 (envoy_server_live)
- **最低值**: 100.00%
- **最高值**: 100.00%
- **平均值**: 100.00%
- **标准差**: 0.00%

#### 其他关键指标
- **请求总数**: 平均=19.48, 最小=1.00, 最大=24.00
- **连接持续时间**: 平均=33638888.89, 最小=0.00, 最大=41950000.00
- **CPU使用率**: 平均=17.41, 最小=0.53, 最大=21.40
- **内存使用量**: 平均=36446325.45, 最小=32841728.00, 最大=40001536.00
- **网络接收字节数**: 平均=791791608.54, 最小=648531.00, 最大=977021865.00
- **网络发送字节数**: 平均=1167409950.91, 最小=651056.00, 最大=1440961221.00

### redis 服务

#### 存活率 (envoy_server_live)
- **最低值**: 100.00%
- **最高值**: 100.00%
- **平均值**: 100.00%
- **标准差**: 0.00%

#### 其他关键指标
- **请求总数**: 平均=23.42, 最小=23.00, 最大=24.00
- **连接持续时间**: 平均=40696774.19, 最小=39900000.00, 最大=41850000.00
- **CPU使用率**: 平均=11.04, 最小=10.74, 最大=11.35
- **内存使用量**: 平均=33302535.34, 最小=30289920.00, 最大=38866944.00
- **网络接收字节数**: 平均=222854326.94, 最小=218140162.00, 最大=227634821.00
- **网络发送字节数**: 平均=362421098.39, 最小=354377286.00, 最大=370566824.00

### shipping 服务

#### 存活率 (envoy_server_live)
- **最低值**: 100.00%
- **最高值**: 100.00%
- **平均值**: 100.00%
- **标准差**: 0.00%

#### 其他关键指标
- **请求总数**: 平均=12.06, 最小=1.00, 最大=24.00
- **连接持续时间**: 平均=19923207.89, 最小=0.00, 最大=41350000.00
- **CPU使用率**: 平均=10.49, 最小=0.36, 最大=20.87
- **内存使用量**: 平均=34250509.76, 最小=29405184.00, 最大=39133184.00
- **网络接收字节数**: 平均=116862736.15, 最小=346223.00, 最大=236625691.00
- **网络发送字节数**: 平均=185246845.06, 最小=414196.00, 最大=375375866.00

### user 服务

#### 存活率 (envoy_server_live)
- **最低值**: 100.00%
- **最高值**: 100.00%
- **平均值**: 100.00%
- **标准差**: 0.00%

#### 其他关键指标
- **请求总数**: 平均=14.91, 最小=1.00, 最大=24.00
- **连接持续时间**: 平均=25346863.80, 最小=0.00, 最大=41950000.00
- **CPU使用率**: 平均=7.23, 最小=0.91, 最大=11.07
- **内存使用量**: 平均=33000209.43, 最小=29536256.00, 最大=38375424.00
- **网络接收字节数**: 平均=383411758.69, 最小=656081.00, 最大=616219603.00
- **网络发送字节数**: 平均=587608191.56, 最小=655446.00, 最大=944697432.00

### web 服务

#### 存活率 (envoy_server_live)
- **最低值**: 100.00%
- **最高值**: 100.00%
- **平均值**: 100.00%
- **标准差**: 0.00%

#### 其他关键指标
- **请求总数**: 平均=15.76, 最小=1.00, 最大=25.00
- **连接持续时间**: 平均=25548306.56, 最小=0.00, 最大=41550014.50
- **CPU使用率**: 平均=7.82, 最小=0.36, 最大=12.40
- **内存使用量**: 平均=34977821.36, 最小=31629312.00, 最大=39305216.00
- **网络接收字节数**: 平均=1913974589.85, 最小=632782.00, 最大=3099364870.00
- **网络发送字节数**: 平均=2884593668.74, 最小=723123.00, 最大=4671323049.00

## 关键事件

- 总警告数: 0
- 总错误数: 0

## 结论

通过本次故障注入实验，我们观察到：

1. **服务可用性影响**: Pod被杀死后，Kubernetes会自动重启pods，但在重启期间服务的存活率(envoy_server_live)会显著下降
2. **级联故障**: 某些服务的故障会影响到依赖它的其他服务
3. **恢复时间**: 大部分服务能在1-2分钟内恢复到正常状态
4. **系统韧性**: Robot Shop微服务架构展现出一定的容错能力，但仍需要改进以应对大规模故障
